"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[422],{7422:(k,_,i)=>{i.r(_),i.d(_,{UserModule:()=>W});var c=i(6895),Z=i(7392),y=i(4859),l=i(7155),m=i(4144),u=i(9299),g=i(7974),M=i(8039),t=i(4650),h=i(900),T=i(1598),r=i(9549),d=i(4006),f=i(8229);const b=function(e){return{icon:"add_chart",name:e}};let N=(()=>{class e{constructor(n,o,p){this.app=n,this.tabs=o,this.route=p,this.userId="",this.buttons=[],this.data={callerName:"",callerPhone:"",category:"",description:"",priorty:"",status:0,title:""}}ngOnInit(){this.route.params.subscribe(n=>{this.userId=n.id,this.getData(this.userId)})}getData(n){this.app.loading=!0,this.app.get(`incident/${n}`).subscribe(o=>{this.data=o,1==o.status&&this.buttons.push({icon:"fact_check",action:()=>{this.app.router.navigate(["dashboard","user",this.userId,"replay"])}}),this.app.loading=!1},()=>{this.app.loading=!1,this.tabs.pop()})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.z),t.Y36(T.x),t.Y36(u.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-edited"]],decls:27,vars:10,consts:[[3,"data","buttons"],["body",""],["appearance","outline"],["matInput","","readonly","",3,"ngModel","ngModelChange"],["matInput","","readonly","","rows","20",3,"ngModel","ngModelChange"]],template:function(n,o){1&n&&(t.TgZ(0,"app-page",0)(1,"div",1)(2,"div")(3,"mat-form-field",2)(4,"mat-label"),t._uU(5,"Title"),t.qZA(),t.TgZ(6,"input",3),t.NdJ("ngModelChange",function(s){return o.data.title=s}),t.qZA()(),t.TgZ(7,"mat-form-field",2)(8,"mat-label"),t._uU(9,"Caller Name"),t.qZA(),t.TgZ(10,"input",3),t.NdJ("ngModelChange",function(s){return o.data.callerName=s}),t.qZA()(),t.TgZ(11,"mat-form-field",2)(12,"mat-label"),t._uU(13,"Caller Phone"),t.qZA(),t.TgZ(14,"input",3),t.NdJ("ngModelChange",function(s){return o.data.callerPhone=s}),t.qZA()(),t.TgZ(15,"mat-form-field",2)(16,"mat-label"),t._uU(17,"category"),t.qZA(),t.TgZ(18,"input",3),t.NdJ("ngModelChange",function(s){return o.data.category=s}),t.qZA()(),t.TgZ(19,"mat-form-field",2)(20,"mat-label"),t._uU(21,"priorty"),t.qZA(),t.TgZ(22,"input",3),t.NdJ("ngModelChange",function(s){return o.data.priorty=s}),t.qZA()(),t.TgZ(23,"mat-form-field",2)(24,"mat-label"),t._uU(25,"description"),t.qZA(),t.TgZ(26,"textarea",4),t.NdJ("ngModelChange",function(s){return o.data.description=s}),t.qZA()()()()()),2&n&&(t.Q6J("data",t.VKq(8,b,o.userId))("buttons",o.buttons),t.xp6(6),t.Q6J("ngModel",o.data.title),t.xp6(4),t.Q6J("ngModel",o.data.callerName),t.xp6(4),t.Q6J("ngModel",o.data.callerPhone),t.xp6(4),t.Q6J("ngModel",o.data.category),t.xp6(4),t.Q6J("ngModel",o.data.priorty),t.xp6(4),t.Q6J("ngModel",o.data.description))},dependencies:[r.KE,r.hX,m.Nt,d.Fj,d.JJ,d.On,f.I],styles:["div[_ngcontent-%COMP%]{padding:5px}div[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e})();var C=i(7331);function x(e,a){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Caller Name"),t.qZA())}function A(e,a){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Oqu(n.callerName)}}function J(e,a){1&e&&(t.TgZ(0,"th",16),t._uU(1,"title"),t.qZA())}function Q(e,a){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",n.title," ")}}function U(e,a){1&e&&(t.TgZ(0,"th",16),t._uU(1,"category"),t.qZA())}function Y(e,a){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",n.category," ")}}function D(e,a){1&e&&(t.TgZ(0,"th",16),t._uU(1,"priorty"),t.qZA())}function L(e,a){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",n.priorty," ")}}function w(e,a){1&e&&(t.TgZ(0,"th",16),t._uU(1,"status"),t.qZA())}function I(e,a){1&e&&(t.ynx(0),t.TgZ(1,"mat-chip",20),t._uU(2,"Waiting"),t.qZA(),t.BQk())}function q(e,a){1&e&&(t.ynx(0),t.TgZ(1,"mat-chip",21),t._uU(2,"Assign"),t.qZA(),t.BQk())}function B(e,a){1&e&&(t.ynx(0),t.TgZ(1,"mat-chip",22),t._uU(2,"Finish"),t.qZA(),t.BQk())}function O(e,a){if(1&e&&(t.TgZ(0,"td",17)(1,"mat-chip-list"),t.ynx(2,18),t.YNc(3,I,3,0,"ng-container",19),t.YNc(4,q,3,0,"ng-container",19),t.YNc(5,B,3,0,"ng-container",19),t.BQk(),t.qZA()()),2&e){const n=a.$implicit;t.xp6(2),t.Q6J("ngSwitch",n.status),t.xp6(1),t.Q6J("ngSwitchCase",0),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2)}}function E(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Update"),t.qZA())}function R(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"td",17)(1,"button",24),t.NdJ("click",function(){const s=t.CHM(n).$implicit,V=t.oxw();return t.KtG(V.editedItem(s))}),t.TgZ(2,"mat-icon"),t._uU(3,"drive_file_rename_outline"),t.qZA()()()}}function S(e,a){1&e&&t._UZ(0,"td",25)}function F(e,a){1&e&&t._UZ(0,"tr",26)}function P(e,a){1&e&&t._UZ(0,"tr",27)}const z=function(){return{icon:"analytics",name:"Incidentes"}},H=function(){return[5,10,20,50]};let j=(()=>{class e{constructor(n){this.app=n,this.displayedColumns=["callerName","title","category","priorty","status","view"],this.users=new l.by([]),this.buttons=[{action:()=>this.getData(),icon:"restore"}]}ngOnInit(){this.getData()}ngAfterViewInit(){this.users.paginator=this.paginator}getData(){this.app.loading=!0,this.app.post("incident/filter",{filter:{assignTo:this.app.user?._id}}).subscribe(n=>{this.app.loading=!1,this.users=new l.by(Object.values(n)),this.users.paginator=this.paginator})}editedItem(n){this.app.router.navigate(["dashboard","user",n._id])}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list"]],viewQuery:function(n,o){if(1&n&&t.Gf(g.NW,5),2&n){let p;t.iGM(p=t.CRH())&&(o.paginator=p.first)}},decls:26,vars:9,consts:[[3,"data","buttons"],["body",""],["mat-table","",3,"dataSource"],["matColumnDef","callerName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","category"],["matColumnDef","priorty"],["matColumnDef","status"],["matColumnDef","view"],["mat-header-cell","","style","width: 50px;",4,"matHeaderCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions","disabled"],["mat-header-cell",""],["mat-cell",""],[3,"ngSwitch"],[4,"ngSwitchCase"],["color","warn","selected",""],["color","accent","selected",""],["color","primary","selected",""],["mat-header-cell","",2,"width","50px"],["mat-icon-button","","color","primary",3,"click"],["mat-footer-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-page",0)(1,"div",1)(2,"div")(3,"table",2),t.ynx(4,3),t.YNc(5,x,2,0,"th",4),t.YNc(6,A,2,1,"td",5),t.BQk(),t.ynx(7,6),t.YNc(8,J,2,0,"th",4),t.YNc(9,Q,2,1,"td",5),t.BQk(),t.ynx(10,7),t.YNc(11,U,2,0,"th",4),t.YNc(12,Y,2,1,"td",5),t.BQk(),t.ynx(13,8),t.YNc(14,D,2,0,"th",4),t.YNc(15,L,2,1,"td",5),t.BQk(),t.ynx(16,9),t.YNc(17,w,2,0,"th",4),t.YNc(18,O,6,4,"td",5),t.BQk(),t.ynx(19,10),t.YNc(20,E,2,0,"th",11),t.YNc(21,R,4,0,"td",5),t.YNc(22,S,1,0,"td",12),t.BQk(),t.YNc(23,F,1,0,"tr",13),t.YNc(24,P,1,0,"tr",14),t.qZA(),t._UZ(25,"mat-paginator",15),t.qZA()()()),2&n&&(t.Q6J("data",t.DdM(7,z))("buttons",o.buttons),t.xp6(3),t.Q6J("dataSource",o.users),t.xp6(20),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(8,H))("disabled",o.users.data.length<5))},dependencies:[c.RF,c.n9,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.mD,l.ge,l.ev,l.yh,l.XQ,l.Gk,g.NW,y.lW,C.qn,C.HS,f.I,Z.Hw],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),e})();var v=i(5412),$=i(737),X=i(8869);const G=function(){return{icon:"check",name:"Resolve"}};let K=(()=>{class e{constructor(n,o,p,s){this.app=n,this.tabs=o,this.route=p,this.dialog=s,this.userId="",this.description="",this.buttons=[{icon:"save",action:()=>this.update()}]}ngOnInit(){this.route.params.subscribe(n=>{this.userId=n.id})}update(){this.app.loading=!0,this.app.put(`incident/${this.userId}`,{data:{replay:this.description}}).subscribe(n=>{this.app.loading=!1,this.dialog.open($.P),this.tabs.pop()},n=>{this.dialog.open(X.I),this.app.loading=!1})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.z),t.Y36(T.x),t.Y36(u.gz),t.Y36(v.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-replay"]],decls:7,vars:4,consts:[[3,"data","buttons"],["body",""],["appearance","outline"],["matInput","","rows","20",3,"ngModel","ngModelChange"]],template:function(n,o){1&n&&(t.TgZ(0,"app-page",0)(1,"div",1)(2,"div")(3,"mat-form-field",2)(4,"mat-label"),t._uU(5,"description"),t.qZA(),t.TgZ(6,"textarea",3),t.NdJ("ngModelChange",function(s){return o.description=s}),t.qZA()()()()()),2&n&&(t.Q6J("data",t.DdM(3,G))("buttons",o.buttons),t.xp6(6),t.Q6J("ngModel",o.description))},dependencies:[r.KE,r.hX,m.Nt,d.Fj,d.JJ,d.On,f.I],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%;margin:3px}"]}),e})(),W=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,l.p0,m.c,g.TU,v.Is,y.ot,d.u5,C.Hi,M.B,Z.Ps,u.Bz.forChild([{path:"",children:[{path:"",component:j},{path:":id",component:N},{path:":id/replay",component:K}]}])]}),e})()}}]);