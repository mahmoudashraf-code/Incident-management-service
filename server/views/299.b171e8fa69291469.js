"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[299],{4299:(Vt,U,c)=>{c.r(U),c.d(U,{IncidentModule:()=>Rt});var p=c(6895),T=c(7392),v=c(4859),d=c(7155),l=c(4006),S=c(4144),w=c(9299),b=c(7974),q=c(8039),Z=c(737),A=c(8869),t=c(4650),y=c(900),P=c(1598),x=c(5412),m=c(9549),g=c(7084),Y=c(8229),D=c(4385),_=c(3238);function k(i,n){if(1&i&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e._id),t.xp6(1),t.AsE(" ",e.name," | ",e.email," ")}}function E(i,n){if(1&i&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function L(i,n){if(1&i&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}const R=function(i){return{icon:"add_chart",name:i}};let $=(()=>{class i{constructor(e,o,r,s){this.app=e,this.tabs=o,this.route=r,this.dialog=s,this.userId="",this.users=[],this.buttons=[],this.status=0,this.userData=new l.cw({title:new l.NI("",[l.kI.required]),description:new l.NI("",[l.kI.required]),callerPhone:new l.NI("",[l.kI.required]),callerName:new l.NI("",[l.kI.required]),assignTo:new l.NI(""),category:new l.NI(""),replay:new l.NI(""),priorty:new l.NI("")}),this.setting={category:[],priorty:[]}}ngOnInit(){this.route.params.subscribe(e=>{this.userId=e.id,"addNew"==e.id?(this.userData.reset(),this.addSave()):this.getData(this.userId)}),this.getSetting(),this.getUsers()}addSave(){this.buttons.push({icon:"save",action:()=>this.save()})}getSetting(){this.app.get("setting").subscribe(e=>{this.setting=e})}getUsers(){this.app.get("users/users").subscribe(e=>{this.users=e})}getData(e){this.app.loading=!0,this.app.get(`incident/${e}`).subscribe(o=>{this.status=o.status,o.status<2&&this.addSave(),this.userData.setValue({title:o.title,description:o.description,callerPhone:o.callerPhone,callerName:o.callerName,category:o.category||"",priorty:o.priorty||"",replay:o.replay||"",assignTo:o.assignTo||""}),this.app.loading=!1},()=>{this.app.loading=!1,this.tabs.pop()})}save(){this.userData.valid?"addNew"==this.userId?this.addNew():this.update():this.dialog.open(A.I)}update(){this.app.loading=!0,this.app.put(`incident/${this.userId}`,{data:this.userData.value}).subscribe(e=>{this.app.loading=!1,this.dialog.open(Z.P),this.tabs.pop()},e=>{this.dialog.open(A.I),this.app.loading=!1})}addNew(){this.app.loading=!0,this.app.post("incident",{data:this.userData.value}).subscribe(e=>{this.app.loading=!1,this.dialog.open(Z.P),this.tabs.pop()},e=>{this.dialog.open(A.I),this.app.loading=!1})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y.z),t.Y36(P.x),t.Y36(w.gz),t.Y36(x.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-edited"]],decls:47,vars:13,consts:[[3,"data","buttons"],["body",""],[3,"formGroup"],["appearance","outline"],["formControlName","assignTo"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","title",3,"readonly"],["matInput","","formControlName","callerName",3,"readonly"],["matInput","","formControlName","callerPhone",3,"readonly"],["formControlName","category"],["formControlName","priorty"],["matInput","","rows","20","formControlName","description",3,"readonly"],[3,"disabled"],["matInput","","readonly","","rows","20","formControlName","replay"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"app-page",0)(1,"div",1)(2,"form",2)(3,"mat-accordion")(4,"mat-expansion-panel")(5,"mat-expansion-panel-header")(6,"mat-panel-title"),t._uU(7," Info "),t.qZA()(),t.TgZ(8,"mat-form-field",3)(9,"mat-label"),t._uU(10,"assign To"),t.qZA(),t.TgZ(11,"mat-select",4),t.YNc(12,k,2,3,"mat-option",5),t.qZA()(),t.TgZ(13,"mat-form-field",3)(14,"mat-label"),t._uU(15,"Title"),t.qZA(),t._UZ(16,"input",6),t.qZA(),t.TgZ(17,"mat-form-field",3)(18,"mat-label"),t._uU(19,"Caller Name"),t.qZA(),t._UZ(20,"input",7),t.qZA(),t.TgZ(21,"mat-form-field",3)(22,"mat-label"),t._uU(23,"Caller Phone"),t.qZA(),t._UZ(24,"input",8),t.qZA(),t.TgZ(25,"mat-form-field",3)(26,"mat-label"),t._uU(27,"category"),t.qZA(),t.TgZ(28,"mat-select",9),t.YNc(29,E,2,2,"mat-option",5),t.qZA()(),t.TgZ(30,"mat-form-field",3)(31,"mat-label"),t._uU(32,"priorty"),t.qZA(),t.TgZ(33,"mat-select",10),t.YNc(34,L,2,2,"mat-option",5),t.qZA()(),t.TgZ(35,"mat-form-field",3)(36,"mat-label"),t._uU(37,"description"),t.qZA(),t._UZ(38,"textarea",11),t.qZA()(),t.TgZ(39,"mat-expansion-panel",12)(40,"mat-expansion-panel-header")(41,"mat-panel-title"),t._uU(42," Resolve "),t.qZA()(),t.TgZ(43,"mat-form-field",3)(44,"mat-label"),t._uU(45,"Resolve"),t.qZA(),t._UZ(46,"textarea",13),t.qZA()()()()()()),2&e&&(t.Q6J("data",t.VKq(11,R,o.userId))("buttons",o.buttons),t.xp6(2),t.Q6J("formGroup",o.userData),t.xp6(10),t.Q6J("ngForOf",o.users),t.xp6(4),t.Q6J("readonly",2==o.status),t.xp6(4),t.Q6J("readonly",2==o.status),t.xp6(4),t.Q6J("readonly",2==o.status),t.xp6(5),t.Q6J("ngForOf",o.setting.category),t.xp6(5),t.Q6J("ngForOf",o.setting.priorty),t.xp6(4),t.Q6J("readonly",2==o.status),t.xp6(1),t.Q6J("disabled",2!=o.status))},dependencies:[p.sg,m.KE,m.hX,S.Nt,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,g.pp,g.ib,g.yz,g.yK,Y.I,D.gD,_.ey],styles:["form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),i})();var F=c(2687),J=c(1281),B=c(9521),H=c(7579),j=c(6451),a=c(7340);const V=["mat-sort-header",""];function G(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",3),t.NdJ("@arrowPosition.start",function(){t.CHM(e);const r=t.oxw();return t.KtG(r._disableViewStateAnimation=!0)})("@arrowPosition.done",function(){t.CHM(e);const r=t.oxw();return t.KtG(r._disableViewStateAnimation=!1)}),t._UZ(1,"div",4),t.TgZ(2,"div",5),t._UZ(3,"div",6)(4,"div",7)(5,"div",8),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("@arrowOpacity",e._getArrowViewState())("@arrowPosition",e._getArrowViewState())("@allowChildren",e._getArrowDirectionState()),t.xp6(2),t.Q6J("@indicator",e._getArrowDirectionState()),t.xp6(1),t.Q6J("@leftPointer",e._getArrowDirectionState()),t.xp6(1),t.Q6J("@rightPointer",e._getArrowDirectionState())}}const K=["*"],Q=new t.OlP("MAT_SORT_DEFAULT_OPTIONS"),X=(0,_.dB)((0,_.Id)(class{}));let N=(()=>{class i extends X{constructor(e){super(),this._defaultOptions=e,this.sortables=new Map,this._stateChanges=new H.x,this.start="asc",this._direction="",this.sortChange=new t.vpe}get direction(){return this._direction}set direction(e){this._direction=e}get disableClear(){return this._disableClear}set disableClear(e){this._disableClear=(0,J.Ig)(e)}register(e){this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){if(!e)return"";let r=function z(i,n){let e=["asc","desc"];return"desc"==i&&e.reverse(),n||e.push(""),e}(e.start||this.start,e?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear),s=r.indexOf(this.direction)+1;return s>=r.length&&(s=0),r[s]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Q,8))},i.\u0275dir=t.lG2({type:i,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],active:["matSortActive","active"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[t.qOj,t.TTD]}),i})();const h=_.mZ.ENTERING+" "+_.yN.STANDARD_CURVE,u={indicator:(0,a.X$)("indicator",[(0,a.SB)("active-asc, asc",(0,a.oB)({transform:"translateY(0px)"})),(0,a.SB)("active-desc, desc",(0,a.oB)({transform:"translateY(10px)"})),(0,a.eR)("active-asc <=> active-desc",(0,a.jt)(h))]),leftPointer:(0,a.X$)("leftPointer",[(0,a.SB)("active-asc, asc",(0,a.oB)({transform:"rotate(-45deg)"})),(0,a.SB)("active-desc, desc",(0,a.oB)({transform:"rotate(45deg)"})),(0,a.eR)("active-asc <=> active-desc",(0,a.jt)(h))]),rightPointer:(0,a.X$)("rightPointer",[(0,a.SB)("active-asc, asc",(0,a.oB)({transform:"rotate(45deg)"})),(0,a.SB)("active-desc, desc",(0,a.oB)({transform:"rotate(-45deg)"})),(0,a.eR)("active-asc <=> active-desc",(0,a.jt)(h))]),arrowOpacity:(0,a.X$)("arrowOpacity",[(0,a.SB)("desc-to-active, asc-to-active, active",(0,a.oB)({opacity:1})),(0,a.SB)("desc-to-hint, asc-to-hint, hint",(0,a.oB)({opacity:.54})),(0,a.SB)("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",(0,a.oB)({opacity:0})),(0,a.eR)("* => asc, * => desc, * => active, * => hint, * => void",(0,a.jt)("0ms")),(0,a.eR)("* <=> *",(0,a.jt)(h))]),arrowPosition:(0,a.X$)("arrowPosition",[(0,a.eR)("* => desc-to-hint, * => desc-to-active",(0,a.jt)(h,(0,a.F4)([(0,a.oB)({transform:"translateY(-25%)"}),(0,a.oB)({transform:"translateY(0)"})]))),(0,a.eR)("* => hint-to-desc, * => active-to-desc",(0,a.jt)(h,(0,a.F4)([(0,a.oB)({transform:"translateY(0)"}),(0,a.oB)({transform:"translateY(25%)"})]))),(0,a.eR)("* => asc-to-hint, * => asc-to-active",(0,a.jt)(h,(0,a.F4)([(0,a.oB)({transform:"translateY(25%)"}),(0,a.oB)({transform:"translateY(0)"})]))),(0,a.eR)("* => hint-to-asc, * => active-to-asc",(0,a.jt)(h,(0,a.F4)([(0,a.oB)({transform:"translateY(0)"}),(0,a.oB)({transform:"translateY(-25%)"})]))),(0,a.SB)("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",(0,a.oB)({transform:"translateY(0)"})),(0,a.SB)("hint-to-desc, active-to-desc, desc",(0,a.oB)({transform:"translateY(-25%)"})),(0,a.SB)("hint-to-asc, active-to-asc, asc",(0,a.oB)({transform:"translateY(25%)"}))]),allowChildren:(0,a.X$)("allowChildren",[(0,a.eR)("* <=> *",[(0,a.IO)("@*",(0,a.pV)(),{optional:!0})])])};let C=(()=>{class i{constructor(){this.changes=new H.x}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const tt={provide:C,deps:[[new t.FiY,new t.tp0,C]],useFactory:function W(i){return i||new C}},et=(0,_.Id)(class{});let it=(()=>{class i extends et{constructor(e,o,r,s,f,$t,jt,O){super(),this._intl=e,this._changeDetectorRef=o,this._sort=r,this._columnDef=s,this._focusMonitor=f,this._elementRef=$t,this._ariaDescriber=jt,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this._sortActionDescription="Sort",O?.arrowPosition&&(this.arrowPosition=O?.arrowPosition),this._handleStateChanges()}get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(e){this._updateSortActionDescription(e)}get disableClear(){return this._disableClear}set disableClear(e){this._disableClear=(0,J.Ig)(e)}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this),this._sortButton=this._elementRef.nativeElement.querySelector(".mat-sort-header-container"),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{const o=!!e;o!==this._showIndicatorHint&&(this._setIndicatorHintVisible(o),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe()}_setIndicatorHintVisible(e){this._isDisabled()&&e||(this._showIndicatorHint=e,this._isSorted()||(this._updateArrowDirection(),this._setAnimationTransitionState(this._showIndicatorHint?{fromState:this._arrowDirection,toState:"hint"}:{fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(e){this._viewState=e||{},this._disableViewStateAnimation&&(this._viewState={toState:e.toState})}_toggleOnInteraction(){this._sort.sort(this),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(e){!this._isDisabled()&&(e.keyCode===B.L_||e.keyCode===B.K5)&&(e.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&("asc"===this._sort.direction||"desc"===this._sort.direction)}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){const e=this._viewState.fromState;return(e?`${e}-to-`:"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?"asc"==this._sort.direction?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(e){this._sortButton&&(this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription),this._ariaDescriber?.describe(this._sortButton,e)),this._sortActionDescription=e}_handleStateChanges(){this._rerenderSubscription=(0,j.T)(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=>{this._isSorted()&&(this._updateArrowDirection(),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"active"}),this._showIndicatorHint=!1),!this._isSorted()&&this._viewState&&"active"===this._viewState.toState&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C),t.Y36(t.sBO),t.Y36(N,8),t.Y36("MAT_SORT_HEADER_COLUMN_DEF",8),t.Y36(F.tE),t.Y36(t.SBq),t.Y36(F.$s,8),t.Y36(Q,8))},i.\u0275cmp=t.Xpm({type:i,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(e,o){1&e&&t.NdJ("click",function(){return o._handleClick()})("keydown",function(s){return o._handleKeydown(s)})("mouseenter",function(){return o._setIndicatorHintVisible(!0)})("mouseleave",function(){return o._setIndicatorHintVisible(!1)}),2&e&&(t.uIk("aria-sort",o._getAriaSortAttribute()),t.ekj("mat-sort-header-disabled",o._isDisabled()))},inputs:{disabled:"disabled",id:["mat-sort-header","id"],arrowPosition:"arrowPosition",start:"start",sortActionDescription:"sortActionDescription",disableClear:"disableClear"},exportAs:["matSortHeader"],features:[t.qOj],attrs:V,ngContentSelectors:K,decls:4,vars:7,consts:[[1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],["class","mat-sort-header-arrow",4,"ngIf"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(e,o){1&e&&(t.F$t(),t.TgZ(0,"div",0)(1,"div",1),t.Hsn(2),t.qZA(),t.YNc(3,G,6,6,"div",2),t.qZA()),2&e&&(t.ekj("mat-sort-header-sorted",o._isSorted())("mat-sort-header-position-before","before"===o.arrowPosition),t.uIk("tabindex",o._isDisabled()?null:0)("role",o._isDisabled()?null:"button"),t.xp6(3),t.Q6J("ngIf",o._renderArrow()))},dependencies:[p.O5],styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-container::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}"],encapsulation:2,data:{animation:[u.indicator,u.leftPointer,u.rightPointer,u.arrowOpacity,u.arrowPosition,u.allowChildren]},changeDetection:0}),i})(),ot=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[tt],imports:[p.ez,_.BQ]}),i})();var nt=c(2225),M=c(7331),I=c(8255);function at(i,n){if(1&i&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e._id),t.xp6(1),t.AsE(" ",e.name," | ",e.email," ")}}function rt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.filter.assignTo=void 0)}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function st(i,n){if(1&i&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function ct(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.filter.category=void 0)}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function lt(i,n){if(1&i&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function dt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.filter.priorty=void 0)}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function pt(i,n){if(1&i&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function mt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.filter.status=void 0)}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}let _t=(()=>{class i{constructor(e){this.app=e,this.done=new t.vpe,this.filter={},this.status=[{id:0,name:"Wating"},{id:1,name:"Assign"},{id:2,name:"Finsh"}],this.users=[],this.setting={category:[],priorty:[]}}ngOnInit(){this.getSetting(),this.getUsers()}getSetting(){this.app.get("setting").subscribe(e=>{this.setting=e})}getUsers(){this.app.get("users/users").subscribe(e=>{this.users=e})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y.z))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-filter"]],outputs:{done:"done"},decls:32,vars:13,consts:[["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["appearance","outline",3,"click"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-button","","matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["mat-raised-button","",3,"click"],[3,"value"],["mat-button","","matSuffix","","mat-icon-button","",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div")(1,"button",0)(2,"mat-icon"),t._uU(3,"filter_alt"),t.qZA()(),t.TgZ(4,"mat-menu",null,1)(6,"mat-form-field",2),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(7,"mat-label"),t._uU(8,"assign To"),t.qZA(),t.TgZ(9,"mat-select",3),t.NdJ("ngModelChange",function(s){return o.filter.assignTo=s}),t.YNc(10,at,2,3,"mat-option",4),t.qZA(),t.YNc(11,rt,3,0,"button",5),t.qZA(),t.TgZ(12,"mat-form-field",2),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(13,"mat-label"),t._uU(14,"category"),t.qZA(),t.TgZ(15,"mat-select",3),t.NdJ("ngModelChange",function(s){return o.filter.category=s}),t.YNc(16,st,2,2,"mat-option",4),t.qZA(),t.YNc(17,ct,3,0,"button",5),t.qZA(),t.TgZ(18,"mat-form-field",2),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(19,"mat-label"),t._uU(20,"priorty"),t.qZA(),t.TgZ(21,"mat-select",3),t.NdJ("ngModelChange",function(s){return o.filter.priorty=s}),t.YNc(22,lt,2,2,"mat-option",4),t.qZA(),t.YNc(23,dt,3,0,"button",5),t.qZA(),t.TgZ(24,"mat-form-field",2),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(25,"mat-label"),t._uU(26,"Staus"),t.qZA(),t.TgZ(27,"mat-select",3),t.NdJ("ngModelChange",function(s){return o.filter.status=s}),t.YNc(28,pt,2,2,"mat-option",4),t.qZA(),t.YNc(29,mt,3,0,"button",5),t.qZA(),t.TgZ(30,"button",6),t.NdJ("click",function(){return o.done.emit(o.filter)}),t._uU(31,"Done"),t.qZA()()()),2&e){const r=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",r),t.xp6(8),t.Q6J("ngModel",o.filter.assignTo),t.xp6(1),t.Q6J("ngForOf",o.users),t.xp6(1),t.Q6J("ngIf",o.filter.assignTo),t.xp6(4),t.Q6J("ngModel",o.filter.category),t.xp6(1),t.Q6J("ngForOf",o.setting.category),t.xp6(1),t.Q6J("ngIf",o.filter.category),t.xp6(4),t.Q6J("ngModel",o.filter.priorty),t.xp6(1),t.Q6J("ngForOf",o.setting.priorty),t.xp6(1),t.Q6J("ngIf",o.filter.priorty),t.xp6(4),t.Q6J("ngModel",o.filter.status),t.xp6(1),t.Q6J("ngForOf",o.status),t.xp6(1),t.Q6J("ngIf",o.filter.status)}},dependencies:[p.sg,p.O5,m.KE,m.hX,m.R9,l.JJ,I.VK,I.p6,l.On,v.lW,D.gD,_.ey,T.Hw],styles:["div[_ngcontent-%COMP%]{width:100%}  .mat-menu-panel{width:700px;height:700px;padding:5px}  .mat-form-field-wrapper{margin:0;padding:0}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),i})();function ht(i,n){1&i&&(t.TgZ(0,"th",26),t._uU(1,"Caller Name"),t.qZA())}function ut(i,n){if(1&i&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.callerName)}}function gt(i,n){1&i&&(t.TgZ(0,"th",26),t._uU(1,"title"),t.qZA())}function ft(i,n){if(1&i&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function Ct(i,n){1&i&&(t.TgZ(0,"th",26),t._uU(1,"category"),t.qZA())}function Tt(i,n){if(1&i&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.category," ")}}function vt(i,n){1&i&&(t.TgZ(0,"th",26),t._uU(1,"priorty"),t.qZA())}function St(i,n){if(1&i&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.priorty," ")}}function wt(i,n){1&i&&(t.TgZ(0,"th",26),t._uU(1,"create"),t.qZA())}function bt(i,n){if(1&i&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.dateCreate)," ")}}function Zt(i,n){1&i&&(t.TgZ(0,"th",26),t._uU(1,"update"),t.qZA())}function At(i,n){if(1&i&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.dateUpdate),"")}}function yt(i,n){1&i&&(t.TgZ(0,"th",28),t._uU(1,"status"),t.qZA())}function xt(i,n){1&i&&(t.ynx(0),t.TgZ(1,"mat-chip",31),t._uU(2,"Waiting"),t.qZA(),t.BQk())}function Dt(i,n){1&i&&(t.ynx(0),t.TgZ(1,"mat-chip",32),t._uU(2,"Assign"),t.qZA(),t.BQk())}function Nt(i,n){1&i&&(t.ynx(0),t.TgZ(1,"mat-chip",33),t._uU(2,"Finish"),t.qZA(),t.BQk())}function Mt(i,n){if(1&i&&(t.TgZ(0,"td",27)(1,"mat-chip-list"),t.ynx(2,29),t.YNc(3,xt,3,0,"ng-container",30),t.YNc(4,Dt,3,0,"ng-container",30),t.YNc(5,Nt,3,0,"ng-container",30),t.BQk(),t.qZA()()),2&i){const e=n.$implicit;t.xp6(2),t.Q6J("ngSwitch",e.status),t.xp6(1),t.Q6J("ngSwitchCase",0),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2)}}function It(i,n){1&i&&(t.TgZ(0,"th",34),t._uU(1,"Delete"),t.qZA())}function Ut(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"td",27)(1,"button",35),t.NdJ("click",function(){const s=t.CHM(e).$implicit,f=t.oxw(2);return t.KtG(f.deleteItem(s._id))}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()()}}function Yt(i,n){1&i&&t._UZ(0,"td",36)}function Ft(i,n){1&i&&(t.TgZ(0,"th",34),t._uU(1,"Update"),t.qZA())}function Jt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"td",27)(1,"button",37),t.NdJ("click",function(){const s=t.CHM(e).$implicit,f=t.oxw(2);return t.KtG(f.editedItem(s))}),t.TgZ(2,"mat-icon"),t._uU(3,"drive_file_rename_outline"),t.qZA()()()}}function Bt(i,n){1&i&&t._UZ(0,"td",36)}function Ht(i,n){1&i&&t._UZ(0,"tr",38)}function Qt(i,n){1&i&&t._UZ(0,"tr",39)}function Ot(i,n){if(1&i&&(t.TgZ(0,"tr",40)(1,"td",41),t._uU(2),t.qZA()()),2&i){t.oxw();const e=t.MAs(6);t.xp6(2),t.hij('No data matching the filter "',e.value,'"')}}const qt=function(i,n){return{icon:i,name:n}},Pt=function(){return[5,10,20,50]};function kt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"app-page",1)(1,"div",2)(2,"mat-form-field",3)(3,"mat-label"),t._uU(4,"Search..."),t.qZA(),t.TgZ(5,"input",4,5),t.NdJ("keyup",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.applyFilter(r))}),t.qZA(),t.TgZ(7,"app-filter",6),t.NdJ("done",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.getData(r))}),t.qZA()(),t.TgZ(8,"table",7),t.ynx(9,8),t.YNc(10,ht,2,0,"th",9),t.YNc(11,ut,2,1,"td",10),t.BQk(),t.ynx(12,11),t.YNc(13,gt,2,0,"th",9),t.YNc(14,ft,2,1,"td",10),t.BQk(),t.ynx(15,12),t.YNc(16,Ct,2,0,"th",9),t.YNc(17,Tt,2,1,"td",10),t.BQk(),t.ynx(18,13),t.YNc(19,vt,2,0,"th",9),t.YNc(20,St,2,1,"td",10),t.BQk(),t.ynx(21,14),t.YNc(22,wt,2,0,"th",9),t.YNc(23,bt,3,3,"td",10),t.BQk(),t.ynx(24,15),t.YNc(25,Zt,2,0,"th",9),t.YNc(26,At,3,3,"td",10),t.BQk(),t.ynx(27,16),t.YNc(28,yt,2,0,"th",17),t.YNc(29,Mt,6,4,"td",10),t.BQk(),t.ynx(30,18),t.YNc(31,It,2,0,"th",19),t.YNc(32,Ut,4,0,"td",10),t.YNc(33,Yt,1,0,"td",20),t.BQk(),t.ynx(34,21),t.YNc(35,Ft,2,0,"th",19),t.YNc(36,Jt,4,0,"td",10),t.YNc(37,Bt,1,0,"td",20),t.BQk(),t.YNc(38,Ht,1,0,"tr",22),t.YNc(39,Qt,1,0,"tr",23),t.YNc(40,Ot,3,1,"tr",24),t.qZA(),t._UZ(41,"mat-paginator",25),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("data",t.WLB(7,qt,e.selectPage.icon,e.selectPage.name))("buttons",e.buttons),t.xp6(8),t.Q6J("dataSource",e.users),t.xp6(30),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(10,Pt))("disabled",e.users.data.length<5)}}let Et=(()=>{class i{constructor(e,o,r,s){this.app=e,this.confirm=o,this.dialog=r,this.route=s,this.displayedColumns=["callerName","title","category","priorty","status","dateCreate","dateUpdate","delete","update"],this.users=new d.by([]),this.pages={all:{icon:"analytics",name:"Incidentes",filter:{}},done:{icon:"admin_panel_settings",name:"Done Incidentes",filter:{status:2}},high:{icon:"verified",name:"High Incidentes",filter:{priorty:"high"}},Wating:{icon:"connect_without_contact",name:"Wating Incidentes",filter:{status:0}}},this.buttons=[{action:()=>this.getData(),icon:"restore"},{action:()=>{this.app.router.navigate(["dashboard","incident","edited","addNew"])},icon:"add"}]}applyFilter(e){this.users.filter=e.target.value.trim().toLowerCase(),this.users.paginator&&this.users.paginator.firstPage()}ngOnInit(){this.route.params.subscribe(e=>{this.selectPage=this.pages[e.id],this.getData()})}ngAfterViewInit(){this.users.paginator=this.paginator,this.users.sort=this.sort}getData(e=this.selectPage.filter){this.app.loading=!0,this.app.post("incident/filter",{filter:e}).subscribe(o=>{this.app.loading=!1,this.users=new d.by(o),this.ngAfterViewInit()})}editedItem(e){this.app.router.navigate(["dashboard","incident","edited",e._id])}deleteItem(e){this.confirm.confirmDialog({title:"Are You Sure?",message:"Are you sure you want to delete item.",confirmCaption:"Yes",cancelCaption:"No"}).subscribe(o=>{o&&(this.app.loading=!0,this.app.delete(`incident/${e}`).subscribe(r=>{this.app.loading=!1,this.dialog.open(Z.P),this.getData()}))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y.z),t.Y36(nt.D),t.Y36(x.uw),t.Y36(w.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-list"]],viewQuery:function(e,o){if(1&e&&(t.Gf(b.NW,5),t.Gf(N,5)),2&e){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first),t.iGM(r=t.CRH())&&(o.sort=r.first)}},decls:1,vars:1,consts:[[3,"data","buttons",4,"ngIf"],[3,"data","buttons"],["body",""],["appearance","outline"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],["matSuffix","",3,"done"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","callerName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","category"],["matColumnDef","priorty"],["matColumnDef","dateCreate"],["matColumnDef","dateUpdate"],["matColumnDef","status"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","delete"],["mat-header-cell","","style","width: 50px;",4,"matHeaderCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","update"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions","disabled"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[3,"ngSwitch"],[4,"ngSwitchCase"],["color","warn","selected",""],["color","accent","selected",""],["color","primary","selected",""],["mat-header-cell","",2,"width","50px"],["mat-icon-button","","color","warn",3,"click"],["mat-footer-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,o){1&e&&t.YNc(0,kt,42,11,"app-page",0),2&e&&t.Q6J("ngIf",o.selectPage)},dependencies:[p.O5,p.RF,p.n9,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.mD,d.ge,d.ev,d.yh,d.XQ,d.Gk,d.Ee,m.KE,m.hX,m.R9,S.Nt,b.NW,N,it,v.lW,M.qn,M.HS,Y.I,T.Hw,_t,p.uU],styles:["table[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]{margin:5px;width:99%}"]}),i})();var Lt=c(3546);let Rt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.ez,d.p0,S.c,Lt.QW,l.UX,b.TU,ot,g.To,I.Tx,l.u5,x.Is,v.ot,M.Hi,q.B,D.LD,T.Ps,w.Bz.forChild([{path:"",children:[{path:"",redirectTo:"list/all",pathMatch:"full"},{path:"list",redirectTo:"list/all",pathMatch:"full"},{path:"edited",redirectTo:"edited/addNew",pathMatch:"full"},{path:"list/:id",component:Et},{path:"edited/:id",component:$}]}])]}),i})()}}]);